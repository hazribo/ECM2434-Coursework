{% extends 'WebApp/game_base.html' %}
{% load static %}

{% block content %}
<div class="container mt-4">
    <div class="card p-4 shadow-lg" style="background-color: #e6f4ea; border-radius: 15px;">
        <p class="text-center text-dark font-weight-bold">Currently logged in user: {{ profile.user.username }}</p>
    </div>

    <!-- Nav Links -->
    <div class="row mt-4 text-center">
        <div class="col">
            <a href="{% url 'policy' %}" class="btn btn-success w-100 py-3 shadow-lg">Policies</a>
        </div>
        <div class="col">
            <a href="{% url 'leaderboard' %}" class="btn btn-success w-100 py-3 shadow-lg">Leaderboard</a>
        </div>
    </div>

    <!-- Game Sections -->
    <div class="row mt-4 text-center">
        <div class="col">
            <a href="{% url 'missions' %}" class="btn w-100 py-3 shadow-lg"><h4 class="text-dark">Missions</h4></a>
        </div>
        <div class="col">
            <div class="card p-4 shadow-lg text-center" style="background-color: #f8f9fa; border-radius: 15px;">
                <h4 class="text-dark">Feed Your Pet!</h4>
                <img src="{% static 'BPgif.gif' %}" alt="Bean" class="img-fluid rounded" style="max-width: 150px;"/>
            </div>
        </div>
        <div class="col">
            <div class="card p-4 shadow-lg text-center" style="background-color: #f8f9fa; border-radius: 15px;">
                <h4 class="text-dark">Friend List</h4>
                {% for friendProfile in friend_list %}
                <div class="d-flex align-items-center mt-2">
                    <img class="pfp_thumbnail" src="{% if friendProfile.pfpUrl %}{{ friendProfile.pfpUrl }}{% else %}{% static 'nopfp.png' %}{% endif %}" />
                    <a href="{{ friendProfile.link }}" class="ml-2 text-success font-weight-bold">{{ friendProfile.name }}</a>
                </div>
                {% endfor %}
            </div>
        </div>
    </div>

    <!-- Progress Bar -->
    <div class="progress-container mt-5">
        <div class="progress-bar" style="width: 25%;">Level: </div>
    </div>

    <!-- Shop -->
    <div class="d-flex flex-row justify-content-center text-center mt-5">
        <div class="box rounded-box">
            <a href="{% url 'shop' %}" class="link button-link clickable">
                Shop
            </a>
        </div>
        <div class="box rounded-box">
            <a class="link button-link">Credits</a>
            <h5 style="color:darkgoldenrod;">{{player_credits}}</h5>
        </div>
    </div>
</div>


<style>
    .container {
        font-size: 1.3rem;
    }
    .rounded-box {
        border-radius: 15px;
        box-shadow: 3px 3px 10px rgba(0, 0, 0, 0.1);
        padding: 20px;
        margin: 10px;
        display: block;
        text-align: center;
        text-decoration: none;
        color: white;
    }
    .link, .box, .character-box, .shop, .credits {
        background-color: #007b5e;
        color: white;
        text-align: center;
    }
    .character-box {
        background-color: #6c757d;
    }
    .progress-container {
        background-color: #dff0d8;
        border-radius: 10px;
        height: 40px;
        overflow: hidden;
    }
    .progress-bar {
        background-color: #28a745;
        height: 100%;
        text-align: center;
        line-height: 40px;
        color: white;
        border-radius: 10px;
    }
    .pet-image {
        width: 100px;
        height: auto;
        margin-top: 10px;
    }
    .friend-item {
        display: flex;
        align-items: center;
        gap: 10px;
        margin-top: 5px;
    }
    .pfp_thumbnail {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        object-fit: cover;
    }
    .button-link {
        color: white !important;
        text-decoration: none !important;
        padding: 0.5rem 0.2rem;
        display: block;
    }
</style>
{% endblock %}
